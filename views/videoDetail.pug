extends layouts/main.pug
include mixins/videoBlockRecommend
include mixins/videoPlayer

block content
    .videoDetail
        .video
            //- .video__player
            //-     video(src=`/${video.fileUrl}`, controls=true/*, autoplay=true, muted 영상 자동재생*/)
            +videoPlayer(video)
            .video__info
                p.video__title=video.title
                p.video__more.light 조회수 #{video.views}회 • #{Date(video.uploadTime).toString().substring(4, 15)}
                .video__description
                    .video__description__column
                        a(href=routes.userDetail(video.creator.id))
                            img.video__description-creator-img(src=video.creator.avatarUrl)
                    .video__description__column
                        a(href=routes.userDetail(video.creator.id)).video__description-creator=video.creator.name
                        <br><br>
                        .video__description-content=video.description
                        .video__description-btn
            .video__comments
                .comments__header
                    if video.comments.length === 1
                        span.video__comments-count#jsCommentsCount 1 comment
                    else
                        span.video__comments-count#jsCommentsCount #{video.comments.length} comments
                    if loggedUser && video.creator.id === loggedUser.id
                        a(href=routes.editVideo(video.id))|Edit Video   
                .comments-form
                    if loggedUser
                        img.comment-profile(src=loggedUser.avatarUrl)
                    else
                        .comment-profile
                    form#jsFormAddComment
                        input(type="text", placeholder = "Add a comment...")
                        .underline
                        .comment-buttons
                            button.addComment-cancel Cancel
                            button.addComment-commit Commit
                ul.comments-list#jsCommentsList
                    each comment in video.comments.reverse()
                        li
                            //- .comment-creator-img
                            .comment-box
                                .comment-title
                                    //- span.comment-creator=comment.creator.name
                                    span.comment-date=comment.uploadTime.toString().substring(4, 21)
                                .comment-content=comment.text
                            .comment-more
                                <i class="fas fa-ellipsis-v"></i>
        .recommends
            p.recommends-title 추천 동영상
            each videoRecommended in videosRecommended
                +videoBlockRecommend(videoRecommended)